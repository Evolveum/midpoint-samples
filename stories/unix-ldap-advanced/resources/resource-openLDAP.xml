<resource xmlns:apti="http://midpoint.evolveum.com/xml/ns/public/common/api-types-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:gen635="http://prism.evolveum.com/xml/ns/public/debug" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" oid="d0811790-1d80-11e4-86b2-3c970e467874" version="51" xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3">
      <name>OpenLDAP</name>
      <description>LDAP resource using a ConnId LDAP connector. It contains configuration&#13;
            for use with OpenLDAP servers.</description>
      <metadata>
         <createTimestamp>2016-06-27T12:12:03.931Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002" type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/model/channels-3#objectImport</createChannel>
      </metadata>
      <operationalState>
         <lastAvailabilityStatus>up</lastAvailabilityStatus>
      </operationalState>
      <connectorRef oid="0b8420ec-3488-4133-b4ac-893f1ba833c9" type="c:ConnectorType">
        <!-- ICF com.evolveum.polygon.connector.ldap.LdapConnector v1.4.2.18 -->
         <description>
                Reference to the OpenICF LDAP connector. This is dynamic reference, it will be translated to
                OID during import.
            </description>
         <filter>
            <q:equal>
               <q:path>c:connectorType</q:path>
               <q:value>com.evolveum.polygon.connector.ldap.LdapConnector</q:value>
            </q:equal>
         </filter>
      </connectorRef>
      <connectorConfiguration xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3">
         <icfc:resultsHandlerConfiguration>
            <icfc:enableNormalizingResultsHandler>false</icfc:enableNormalizingResultsHandler>
            <icfc:enableFilteredResultsHandler>false</icfc:enableFilteredResultsHandler>
            <icfc:enableAttributesToGetSearchResultsHandler>false</icfc:enableAttributesToGetSearchResultsHandler>
         </icfc:resultsHandlerConfiguration>
         <icfc:configurationProperties xmlns:gen742="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/com.evolveum.polygon.connector-ldap/com.evolveum.polygon.connector.ldap.LdapConnector">
            <gen742:host>localhost</gen742:host>
            <gen742:port>389</gen742:port>
            <gen742:bindDn>cn=idm,ou=Administrators,dc=example,dc=com</gen742:bindDn>
            <gen742:bindPassword>
               <t:clearValue>secret</t:clearValue>
            </gen742:bindPassword>
            <gen742:baseContext>dc=example,dc=com</gen742:baseContext>
            <gen742:pagingStrategy>auto</gen742:pagingStrategy>
            <gen742:vlvSortAttribute>uid,cn,ou</gen742:vlvSortAttribute>
            <gen742:vlvSortOrderingRule>2.5.13.3</gen742:vlvSortOrderingRule>
            <gen742:operationalAttributes>createTimestamp</gen742:operationalAttributes>
            <gen742:operationalAttributes>isMemberOf</gen742:operationalAttributes>
         </icfc:configurationProperties>
      </connectorConfiguration>
      <schema>
          <generationConstraints>
            <generateObjectClass>ri:inetOrgPerson</generateObjectClass>
            <generateObjectClass>ri:posixAccount</generateObjectClass>
            <generateObjectClass>ri:posixGroup</generateObjectClass>
            <generateObjectClass>ri:groupOfUniqueNames</generateObjectClass>
            <generateObjectClass>ri:groupOfNames</generateObjectClass>
            <generateObjectClass>ri:organizationalUnit</generateObjectClass>
         </generationConstraints>
      </schema>
      <schemaHandling>
         <objectType>
            <kind>entitlement</kind>
            <intent>unixGroup</intent>
            <displayName>UNIX Group</displayName>
            <objectClass>ri:groupOfNames</objectClass>
            <auxiliaryObjectClass>ri:posixGroup</auxiliaryObjectClass>
            <baseContext>
               <objectClass>ri:organizationalUnit</objectClass>
               <filter>
                  <q:equal>
                     <q:path>attributes/dn</q:path>
                     <q:value>ou=groups,dc=example,dc=com</q:value>
                  </q:equal>
               </filter>
            </baseContext>
            <attribute>
               <c:ref>ri:dn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:distinguishedName</matchingRule>
               <outbound>
                  <source>
                     <c:path>name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
								import javax.naming.ldap.Rdn
								import javax.naming.ldap.LdapName
								
								dn = new LdapName('ou=Groups,dc=example,dc=com')
								dn.add(new Rdn('cn', name.toString()))
								return dn.toString()
							</code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:cn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>weak</strength>
                  <source>
                     <c:path>name</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:member</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path>$focus/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
	                        	import javax.naming.ldap.Rdn
	                        	import javax.naming.ldap.LdapName

	                        	memberAttr = new LdapName('ou=groups,dc=example,dc=com')
	                        	memberAttr.add(new Rdn('uid', 'nobody'))

	                        	return memberAttr.toString()
	                        </code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:memberUid</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
            </attribute>
            <attribute>
               <c:ref>ri:description</c:ref>
               <outbound>
                  <source>
                     <c:path>description</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:gidNumber</c:ref>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path xmlns:posix="http://example.com/xml/ns/mySchema">extension/posix:gidNumber</c:path>
                  </source>
               </outbound>
            </attribute>
            <association>
               <c:ref>ri:ldapGroup</c:ref>
               <displayName>LDAP Group Membership</displayName>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <kind>entitlement</kind>
               <intent>ldapGroup</intent>
               <direction>objectToSubject</direction>
               <associationAttribute>ri:member</associationAttribute>
               <valueAttribute>ri:dn</valueAttribute>
               <explicitReferentialIntegrity>true</explicitReferentialIntegrity>
            </association>
         </objectType>
         <objectType>
            <kind>entitlement</kind>
            <intent>unixGroup-admin</intent>
            <displayName>UNIX Group</displayName>
            <objectClass>ri:groupOfNames</objectClass>
            <auxiliaryObjectClass>ri:posixGroup</auxiliaryObjectClass>
            <baseContext>
               <objectClass>ri:organizationalUnit</objectClass>
               <filter>
                  <q:equal>
                     <q:path>attributes/dn</q:path>
                     <q:value>ou=groups,dc=example,dc=com</q:value>
                  </q:equal>
               </filter>
            </baseContext>
            <attribute>
               <c:ref>ri:dn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:distinguishedName</matchingRule>
               <outbound>
                  <source>
                     <c:path>identifier</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
								import javax.naming.ldap.Rdn
								import javax.naming.ldap.LdapName
								
								dn = new LdapName('ou=Groups,dc=example,dc=com')
								dn.add(new Rdn('cn', identifier.toString()+'admin'))
								return dn.toString()
							</code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:cn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>weak</strength>
                  <source>
                     <c:path>identifier</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:member</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path>$focus/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
	                        	import javax.naming.ldap.Rdn
	                        	import javax.naming.ldap.LdapName

	                        	memberAttr = new LdapName('ou=groups,dc=example,dc=com')
	                        	memberAttr.add(new Rdn('uid', 'nobody'))

	                        	return memberAttr.toString()
	                        </code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:memberUid</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
            </attribute>
            <attribute>
               <c:ref>ri:description</c:ref>
               <outbound>
                  <source>
                     <c:path>description</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:gidNumber</c:ref>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path xmlns:posix="http://example.com/xml/ns/mySchema">extension/posix:gidNumber</c:path>
                  </source>
               </outbound>
            </attribute>
         </objectType>
         <objectType>
            <kind>entitlement</kind>
            <intent>unixGroup-auditor</intent>
            <displayName>UNIX Group</displayName>
            <objectClass>ri:groupOfNames</objectClass>
            <auxiliaryObjectClass>ri:posixGroup</auxiliaryObjectClass>
            <baseContext>
               <objectClass>ri:organizationalUnit</objectClass>
               <filter>
                  <q:equal>
                     <q:path>attributes/dn</q:path>
                     <q:value>ou=groups,dc=example,dc=com</q:value>
                  </q:equal>
               </filter>
            </baseContext>
            <attribute>
               <c:ref>ri:dn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:distinguishedName</matchingRule>
               <outbound>
                  <source>
                     <c:path>identifier</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
								import javax.naming.ldap.Rdn
								import javax.naming.ldap.LdapName
								
								dn = new LdapName('ou=Groups,dc=example,dc=com')
								dn.add(new Rdn('cn', identifier.toString()+'auditor'))
								return dn.toString()
							</code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:cn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>weak</strength>
                  <source>
                     <c:path>identifier</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:member</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path>$focus/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
	                        	import javax.naming.ldap.Rdn
	                        	import javax.naming.ldap.LdapName

	                        	memberAttr = new LdapName('ou=groups,dc=example,dc=com')
	                        	memberAttr.add(new Rdn('uid', 'nobody'))

	                        	return memberAttr.toString()
	                        </code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:memberUid</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
            </attribute>
            <attribute>
               <c:ref>ri:description</c:ref>
               <outbound>
                  <source>
                     <c:path>description</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:gidNumber</c:ref>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path xmlns:posix="http://example.com/xml/ns/mySchema">extension/posix:gidNumber</c:path>
                  </source>
               </outbound>
            </attribute>
         </objectType>
         <objectType>
            <kind>entitlement</kind>
            <intent>unixGroup-user</intent>
            <displayName>UNIX Group</displayName>
            <objectClass>ri:groupOfNames</objectClass>
            <auxiliaryObjectClass>ri:posixGroup</auxiliaryObjectClass>
            <baseContext>
               <objectClass>ri:organizationalUnit</objectClass>
               <filter>
                  <q:equal>
                     <q:path>attributes/dn</q:path>
                     <q:value>ou=groups,dc=example,dc=com</q:value>
                  </q:equal>
               </filter>
            </baseContext>
            <attribute>
               <c:ref>ri:dn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:distinguishedName</matchingRule>
               <outbound>
                  <source>
                     <c:path>identifier</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
								import javax.naming.ldap.Rdn
								import javax.naming.ldap.LdapName
								
								dn = new LdapName('ou=Groups,dc=example,dc=com')
								dn.add(new Rdn('cn', identifier.toString()+'user'))
								return dn.toString()
							</code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:cn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>weak</strength>
                  <source>
                     <c:path>identifier</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:member</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path>$focus/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
	                        	import javax.naming.ldap.Rdn
	                        	import javax.naming.ldap.LdapName

	                        	memberAttr = new LdapName('ou=groups,dc=example,dc=com')
	                        	memberAttr.add(new Rdn('uid', 'nobody'))

	                        	return memberAttr.toString()
	                        </code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:memberUid</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
            </attribute>
            <attribute>
               <c:ref>ri:description</c:ref>
               <outbound>
                  <source>
                     <c:path>description</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:gidNumber</c:ref>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path xmlns:posix="http://example.com/xml/ns/mySchema">extension/posix:gidNumber</c:path>
                  </source>
               </outbound>
            </attribute>
         </objectType>
         <objectType>
            <kind>account</kind>
            <displayName>Normal Account</displayName>
            <default>true</default>
            <objectClass>ri:inetOrgPerson</objectClass>
            <attribute>
               <c:ref>ri:dn</c:ref>
               <displayName>Distinguished Name</displayName>
               <limitations>
                  <minOccurs>0</minOccurs>
                  <access>
                     <read>true</read>
                     <add>true</add>
                     <modify>true</modify>
                  </access>
               </limitations>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <source>
                     <c:path>$user/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
								'uid=' + name + iterationToken + ',ou=people,dc=example,dc=com'
							</code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:entryUUID</c:ref>
               <displayName>Entry UUID</displayName>
               <limitations>
                  <access>
                     <read>true</read>
                     <add>true</add>
                     <modify>true</modify>
                  </access>
               </limitations>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
            </attribute>
            <attribute>
               <c:ref>ri:cn</c:ref>
               <displayName>Common Name</displayName>
               <limitations>
                  <minOccurs>0</minOccurs>
                  <access>
                     <read>true</read>
                     <add>true</add>
                     <modify>true</modify>
                  </access>
               </limitations>
               <outbound>
                  <source>
                     <c:path>$user/fullName</c:path>
                  </source>
               </outbound>
               <inbound>
                  <target>
                     <c:path>fullName</c:path>
                  </target>
               </inbound>
            </attribute>
            <attribute>
               <c:ref>ri:sn</c:ref>
               <displayName>Surname</displayName>
               <limitations>
                  <minOccurs>0</minOccurs>
               </limitations>
               <outbound>
                  <source>
                     <c:path>familyName</c:path>
                  </source>
               </outbound>
               <inbound>
                  <target>
                     <c:path>familyName</c:path>
                  </target>
               </inbound>
            </attribute>
            <attribute>
               <c:ref>ri:givenName</c:ref>
               <displayName>Given Name</displayName>
               <outbound>
                  <source>
                     <c:path>$c:user/c:givenName</c:path>
                  </source>
               </outbound>
               <inbound>
                  <target>
                     <c:path>givenName</c:path>
                  </target>
               </inbound>
            </attribute>
            <attribute>
               <c:ref>ri:uid</c:ref>
               <displayName>Login Name</displayName>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>weak</strength>
                  <source>
                     <description>Source may have description</description>
                     <c:path>$user/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>name + iterationToken</code>
                     </script>
                  </expression>
               </outbound>
               <inbound>
                  <target>
                     <c:path>name</c:path>
                  </target>
               </inbound>
            </attribute>
            <attribute>
               <c:ref>ri:description</c:ref>
               <displayName>Description</displayName>
               <outbound>
                  <source>
                     <c:path>$c:user/c:description</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:mail</c:ref>
               <displayName>Email Address</displayName>
               <outbound>
                  <source>
                     <c:path>emailAddress</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:jpegPhoto</c:ref>
               <displayName>Photograph</displayName>
               <outbound>
                  <source>
                     <c:path>jpegPhoto</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:l</c:ref>
               <displayName>Location</displayName>
               <outbound>
                  <source>
                     <c:path>$user/locality</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:employeeType</c:ref>
               <displayName>Employee Type</displayName>
               <tolerant>false</tolerant>
               <outbound>
                  <source>
                     <c:path>$user/employeeType</c:path>
                  </source>
               </outbound>
            </attribute>
            <association>
               <c:ref>ri:ldapGroup</c:ref>
               <displayName>LDAP Group Membership</displayName>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <tolerant>false</tolerant>
               <kind>entitlement</kind>
               <intent>ldapGroup</intent>
               <direction>objectToSubject</direction>
               <associationAttribute>ri:member</associationAttribute>
               <valueAttribute>ri:dn</valueAttribute>
               <explicitReferentialIntegrity>true</explicitReferentialIntegrity>
            </association>
            <association>
               <c:ref>ri:unixGroup</c:ref>
               <displayName>UNIX Group Membership</displayName>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <tolerant>false</tolerant>
               <auxiliaryObjectClass>ri:posixAccount</auxiliaryObjectClass>
               <kind>entitlement</kind>
               <intent>unixGroup</intent>
               <intent>unixGroup-admin</intent>
               <intent>unixGroup-auditor</intent>
               <intent>unixGroup-user</intent>
               <direction>objectToSubject</direction>
               <associationAttribute>ri:memberUid</associationAttribute>
               <valueAttribute>ri:uid</valueAttribute>
               <explicitReferentialIntegrity>true</explicitReferentialIntegrity>
            </association>
            <iteration>
               <maxIterations>5</maxIterations>
            </iteration>
            <protected>
               <filter>
                  <q:equal>
                     <q:matching>http://prism.evolveum.com/xml/ns/public/matching-rule-3#stringIgnoreCase</q:matching>
                     <q:path>attributes/ri:dn</q:path>
                     <q:value>cn=idm,ou=Administrators,dc=example,dc=com</q:value>
                  </q:equal>
               </filter>
            </protected>
            <activation>
               <existence>
                  <outbound>
                     <expression>
                        <asIs/>
                     </expression>
                  </outbound>
               </existence>
               <administrativeStatus>
                  <outbound/>
               </administrativeStatus>
            </activation>
            <credentials>
               <password>
                  <outbound>
                     <expression>
                        <asIs/>
                     </expression>
                  </outbound>
                  <inbound>
                     <strength>weak</strength>
                     <expression>
                        <generate/>
                     </expression>
                  </inbound>
               </password>
            </credentials>
         </objectType>
         <objectType>
            <kind>entitlement</kind>
            <intent>ldapGroup</intent>
            <displayName>LDAP Group</displayName>
            <objectClass>ri:groupOfNames</objectClass>
            <baseContext>
               <objectClass>ri:organizationalUnit</objectClass>
               <filter>
                  <q:equal>
                     <q:path>attributes/dn</q:path>
                     <q:value>ou=groups,dc=example,dc=com</q:value>
                  </q:equal>
               </filter>
            </baseContext>
            <attribute>
               <c:ref>ri:dn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:distinguishedName</matchingRule>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path>$focus/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
                            	import javax.naming.ldap.Rdn
	                        	import javax.naming.ldap.LdapName
	                        	
	                        	dn = new LdapName('ou=groups,dc=example,dc=com')
	                        	dn.add(new Rdn('cn', name.toString()))

	                        	return dn.toString()
	                        </code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:member</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path>$focus/name</c:path>
                  </source>
                  <expression>
                     <script>
                        <code>
	                        	import javax.naming.ldap.Rdn
	                        	import javax.naming.ldap.LdapName

	                        	memberAttr = new LdapName('ou=groups,dc=example,dc=com')
	                        	memberAttr.add(new Rdn('uid', 'nobody'))

	                        	return memberAttr.toString()
	                        </code>
                     </script>
                  </expression>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:cn</c:ref>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <outbound>
                  <strength>weak</strength>
                  <source>
                     <c:path>$focus/name</c:path>
                  </source>
               </outbound>
            </attribute>
            <attribute>
               <c:ref>ri:description</c:ref>
               <outbound>
                  <strength>strong</strength>
                  <source>
                     <c:path>description</c:path>
                  </source>
               </outbound>
            </attribute>
            <association>
               <c:ref>ri:ldapGroup</c:ref>
               <displayName>LDAP Group Membership</displayName>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <kind>entitlement</kind>
               <intent>ldapGroup</intent>
               <direction>objectToSubject</direction>
               <associationAttribute>ri:member</associationAttribute>
               <valueAttribute>ri:dn</valueAttribute>
               <explicitReferentialIntegrity>true</explicitReferentialIntegrity>
            </association>
            <association>
               <c:ref>ri:unixGroup</c:ref>
               <displayName>LDAP Group Membership</displayName>
               <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
               <kind>entitlement</kind>
               <intent>unixGroup</intent>
               <direction>objectToSubject</direction>
               <associationAttribute>ri:memberUid</associationAttribute>
               <valueAttribute>ri:dn</valueAttribute>
               <explicitReferentialIntegrity>true</explicitReferentialIntegrity>
            </association>
         </objectType>
      </schemaHandling>
      <capabilities>
         <cachingMetadata>
            <retrievalTimestamp>2016-09-19T11:31:29.130Z</retrievalTimestamp>
            <serialNumber>c996715ea32c2cc6-d5c42d146fb5bc09</serialNumber>
         </cachingMetadata>
         <native xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3">
            <cap:addRemoveAttributeValues/>
            <cap:credentials>
               <cap:password/>
            </cap:credentials>
            <cap:auxiliaryObjectClasses/>
            <cap:liveSync/>
            <cap:testConnection/>
            <cap:create/>
            <cap:read/>
            <cap:update/>
            <cap:delete/>
            <cap:script>
               <cap:host>
                  <cap:type>connector</cap:type>
               </cap:host>
            </cap:script>
            <cap:pagedSearch/>
         </native>
      </capabilities>
      <consistency>
         <avoidDuplicateValues>true</avoidDuplicateValues>
      </consistency>
      <synchronization>
         <objectSynchronization>
            <kind>account</kind>
            <intent>default</intent>
            <enabled>true</enabled>
            <correlation>
               <q:description>
	                    Correlation expression is a search query.
	                    Following search query will look for users that have "name"
	                    equal to the "uid" attribute of the account. Simply speaking,
	                    it will look for match in usernames in the IDM and the resource.
	                    The correlation rule always looks for users, so it will not match
	                    any other object type.
	                </q:description>
               <q:equal>
                  <q:path>name</q:path>
                  <expression>
                     <c:path>declare namespace ri='http://midpoint.evolveum.com/xml/ns/public/resource/instance-3'; $account/attributes/ri:uid</c:path>
                  </expression>
               </q:equal>
            </correlation>
            <reaction>
               <situation>linked</situation>
               <synchronize>true</synchronize>
            </reaction>
            <reaction>
               <situation>deleted</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unlinked</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unmatched</situation>
               <synchronize>true</synchronize>
               <objectTemplateRef oid="63cc1d99-dedc-4269-a051-b006821a4c52"/>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
               </action>
            </reaction>
         </objectSynchronization>
         <objectSynchronization>
            <objectClass>ri:groupOfNames</objectClass>
            <kind>entitlement</kind>
            <intent>unixGroup</intent>
            <enabled>true</enabled>
            <condition>
               <script>
                  <code>
                           dn = basic.getSecondaryIdentifierValue(shadow)
                           return !dn.contains('admin') &amp;&amp; !dn.contains('auditor') &amp;&amp; !dn.contains('user')
                           
                       </code>
               </script>
            </condition>
            <correlation>
               <q:description>
                        Correlation expression is a search query.
	                    Following search query will look for users that have "name"
	                    equal to the "uid" attribute of the account. Simply speaking,
	                    it will look for match in usernames in the IDM and the resource.
	                    The correlation rule always looks for users, so it will not match
	                    any other object type.
	                </q:description>
               <q:equal>
                  <q:path>name</q:path>
                  <expression>
                     <c:path>declare namespace ri='http://midpoint.evolveum.com/xml/ns/public/resource/instance-3'; $account/attributes/ri:cn</c:path>
                  </expression>
               </q:equal>
            </correlation>
            <reaction>
               <situation>linked</situation>
               <synchronize>true</synchronize>
            </reaction>
            <reaction>
               <situation>deleted</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unlinked</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unmatched</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
               </action>
            </reaction>
         </objectSynchronization>
         <objectSynchronization>
            <objectClass>ri:groupOfNames</objectClass>
            <kind>entitlement</kind>
            <intent>unixGroup-admin</intent>
            <enabled>true</enabled>
            <condition>
               <script>
                  <code>
                           dn = basic.getSecondaryIdentifierValue(shadow)
                           return dn.contains('admin')
                           
                       </code>
               </script>
            </condition>
            <correlation>
               <q:description>
                        Correlation expression is a search query.
	                    Following search query will look for users that have "name"
	                    equal to the "uid" attribute of the account. Simply speaking,
	                    it will look for match in usernames in the IDM and the resource.
	                    The correlation rule always looks for users, so it will not match
	                    any other object type.
	                </q:description>
               <q:equal>
                  <q:path>name</q:path>
                  <expression>
                     <script>
                        <code>
                           dn = basic.getSecondaryIdentifierValue(shadow)
                           return dn.replace('cn=','').replace('admin,ou=Groups,dc=example,dc=com','seta')
                          
                           
                       </code>
                     </script>
                  </expression>
               </q:equal>
            </correlation>
            <reaction>
               <situation>linked</situation>
               <synchronize>true</synchronize>
            </reaction>
            <reaction>
               <situation>deleted</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unlinked</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unmatched</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
               </action>
            </reaction>
         </objectSynchronization>
         <objectSynchronization>
            <objectClass>ri:groupOfNames</objectClass>
            <kind>entitlement</kind>
            <intent>unixGroup-auditor</intent>
            <enabled>true</enabled>
            <condition>
               <script>
                  <code>
                           dn = basic.getSecondaryIdentifierValue(shadow)
                           return dn.contains('auditor')
                           
                       </code>
               </script>
            </condition>
            <correlation>
               <q:description>
                        Correlation expression is a search query.
	                    Following search query will look for users that have "name"
	                    equal to the "uid" attribute of the account. Simply speaking,
	                    it will look for match in usernames in the IDM and the resource.
	                    The correlation rule always looks for users, so it will not match
	                    any other object type.
	                </q:description>
               <q:equal>
                  <q:path>name</q:path>
                  <expression>
                     <script>
                        <code>
                           dn = basic.getSecondaryIdentifierValue(shadow)
                           return dn.replace('cn=','').replace('auditor,ou=Groups,dc=example,dc=com','seta')
                           
                       </code>
                     </script>
                  </expression>
               </q:equal>
            </correlation>
            <reaction>
               <situation>linked</situation>
               <synchronize>true</synchronize>
            </reaction>
            <reaction>
               <situation>deleted</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unlinked</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unmatched</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
               </action>
            </reaction>
         </objectSynchronization>
         <objectSynchronization>
            <objectClass>ri:groupOfNames</objectClass>
            <kind>entitlement</kind>
            <intent>unixGroup-user</intent>
            <enabled>true</enabled>
            <condition>
               <script>
                  <code>
                           dn = basic.getSecondaryIdentifierValue(shadow)
                           return dn.contains('user')
                           
                       </code>
               </script>
            </condition>
            <correlation>
               <q:description>
                        Correlation expression is a search query.
	                    Following search query will look for users that have "name"
	                    equal to the "uid" attribute of the account. Simply speaking,
	                    it will look for match in usernames in the IDM and the resource.
	                    The correlation rule always looks for users, so it will not match
	                    any other object type.
	                </q:description>
               <q:equal>
                  <q:path>name</q:path>
                  <expression>
                     <script>
                        <code>
                           dn = basic.getSecondaryIdentifierValue(shadow)
                           return dn.replace('cn=','').replace('user,ou=Groups,dc=example,dc=com','seta')
                       </code>
                     </script>
                  </expression>
               </q:equal>
            </correlation>
            <reaction>
               <situation>linked</situation>
               <synchronize>true</synchronize>
            </reaction>
            <reaction>
               <situation>deleted</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unlinked</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
               </action>
            </reaction>
            <reaction>
               <situation>unmatched</situation>
               <synchronize>true</synchronize>
               <action>
                  <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
               </action>
            </reaction>
         </objectSynchronization>
      </synchronization>
   </resource>
