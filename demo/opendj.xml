<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2010-2015 Evolveum
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->


<objects xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
         xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
         xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3"
         xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3"
         xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3">


    <resource oid="12c78a70-76b7-11e2-9cb3-001e8c717e5b">

        <name>LDAP Server (OpenDJ)</name>

        <description>
            LDAP resource using an Identity Connector Framework LDAP connector. It contains configuration
            for connecting to an OpenDJ instance running on the localhost.
        </description>

        <connectorRef type="ConnectorType">
            <description>
                Reference to the ICF LDAP connector. This is dynamic reference, it is translated to
                OID during import.
            </description>
            <filter>
                <q:equal>
				<q:path>c:connectorType</q:path>
                    <q:value>org.identityconnectors.ldap.LdapConnector</q:value>
                </q:equal>
            </filter>
        </connectorRef>

	 <connectorConfiguration>
		<icfc:configurationProperties
			xmlns:icfcldap="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/com.evolveum.polygon.connector-ldap/com.evolveum.polygon.connector.ldap.LdapConnector">
			<icfcldap:port>1389</icfcldap:port>
			<icfcldap:host>localhost</icfcldap:host>
			<icfcldap:baseContextsToSynchronize>ou=people,dc=example,dc=com</icfcldap:baseContextsToSynchronize>
			<icfcldap:baseContextsToSynchronize>ou=groups,dc=example,dc=com</icfcldap:baseContextsToSynchronize>
			<icfcldap:bindDn>uid=idm,ou=Administrators,dc=example,dc=com</icfcldap:bindDn>
            <icfcldap:pagingStrategy>none</icfcldap:pagingStrategy>
			 <icfcldap:bindPassword>
                    <clearValue>secret</clearValue>
                </icfcldap:bindPassword>
			<icfcldap:modifiersNamesToFilterOut>uid=idm,ou=Administrators,dc=example,dc=com</icfcldap:modifiersNamesToFilterOut>
			<icfcldap:vlvSortAttribute>uid</icfcldap:vlvSortAttribute>
			<icfcldap:operationalAttributes>ds-pwp-account-disabled</icfcldap:operationalAttributes>
		</icfc:configurationProperties>
         <icfc:resultsHandlerConfiguration>
             <icfc:enableFilteredResultsHandler>false</icfc:enableFilteredResultsHandler>
         </icfc:resultsHandlerConfiguration>
		<icfc:connectorPoolConfiguration>
			<icfc:minEvictableIdleTimeMillis>120000</icfc:minEvictableIdleTimeMillis>
			<icfc:minIdle>1</icfc:minIdle>
			<icfc:maxIdle>10</icfc:maxIdle>
			<icfc:maxObjects>10</icfc:maxObjects>
			<icfc:maxWait>150000</icfc:maxWait>
		</icfc:connectorPoolConfiguration>
		<icfc:timeouts>
			<icfc:create>-1</icfc:create>
			<icfc:get>-1</icfc:get>
			<icfc:update>-1</icfc:update>
			<icfc:delete>-1</icfc:delete>
			<icfc:test>-1</icfc:test>
			<icfc:scriptOnConnector>-1</icfc:scriptOnConnector>
			<icfc:scriptOnResource>-1</icfc:scriptOnResource>
			<icfc:authentication>-1</icfc:authentication>
			<icfc:search>-1</icfc:search>
			<icfc:validate>-1</icfc:validate>
			<icfc:sync>-1</icfc:sync>
			<icfc:schema>-1</icfc:schema>
		</icfc:timeouts>
	</connectorConfiguration>

   <schema>
      <c:cachingMetadata xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
                         xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
                         xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
                         xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3"
                         xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
                         xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3"
                         xmlns:apti="http://midpoint.evolveum.com/xml/ns/public/common/api-types-3"
                         xmlns:ds="http://www.w3.org/2000/09/xmldsig#"
                         xmlns:enc="http://www.w3.org/2001/04/xmlenc#">
         <c:retrievalTimestamp>2013-03-14T16:33:40.791+01:00</c:retrievalTimestamp>
         <c:serialNumber>c4a91d3030826f9f-17da37c239b18016</c:serialNumber>
      </c:cachingMetadata>
      <definition>
         <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                     xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
                     xmlns:ra="http://midpoint.evolveum.com/xml/ns/public/resource/annotation-3"
                     xmlns:tns="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
                     xmlns:a="http://prism.evolveum.com/xml/ns/public/annotation-3"
                     elementFormDefault="qualified"
                     targetNamespace="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">
            <xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"/>
            <xsd:import namespace="http://prism.evolveum.com/xml/ns/public/annotation-3"/>
            <xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/resource/annotation-3"/>

             <xsd:complexType name="inetOrgPerson">
                 <xsd:annotation>
                     <xsd:appinfo>
                         <ra:default/>
                         <ra:resourceObject/>
                         <ra:identifier>ri:entryUUID</ra:identifier>
                         <ra:secondaryIdentifier>ri:dn</ra:secondaryIdentifier>
                         <ra:displayNameAttribute>ri:dn</ra:displayNameAttribute>
                         <ra:namingAttribute>ri:dn</ra:namingAttribute>
                         <ra:nativeObjectClass>inetOrgPerson</ra:nativeObjectClass>
                     </xsd:appinfo>
                 </xsd:annotation>
                 <xsd:sequence>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="audio"
                                  type="xsd:base64Binary">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>120</a:displayOrder>
                                 <ra:nativeAttributeName>audio</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>audio</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="seeAlso"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>130</a:displayOrder>
                                 <ra:nativeAttributeName>seeAlso</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>seeAlso</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="employeeNumber" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>140</a:displayOrder>
                                 <ra:nativeAttributeName>employeeNumber</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>employeeNumber</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="roomNumber"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>150</a:displayOrder>
                                 <ra:nativeAttributeName>roomNumber</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>roomNumber</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="mail"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>160</a:displayOrder>
                                 <ra:nativeAttributeName>mail</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>mail</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="registeredAddress"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>170</a:displayOrder>
                                 <ra:nativeAttributeName>registeredAddress</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>registeredAddress</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="secretary"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>180</a:displayOrder>
                                 <ra:nativeAttributeName>secretary</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>secretary</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="preferredLanguage" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>190</a:displayOrder>
                                 <ra:nativeAttributeName>preferredLanguage</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>preferredLanguage</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="postalAddress"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>200</a:displayOrder>
                                 <ra:nativeAttributeName>postalAddress</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>postalAddress</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="jpegPhoto"
                                  type="xsd:base64Binary">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>210</a:displayOrder>
                                 <ra:nativeAttributeName>jpegPhoto</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>jpegPhoto</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="userCertificate"
                                  type="xsd:base64Binary">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>220</a:displayOrder>
                                 <ra:nativeAttributeName>userCertificate</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>userCertificate</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="description"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>230</a:displayOrder>
                                 <ra:nativeAttributeName>description</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>description</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="teletexTerminalIdentifier"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>240</a:displayOrder>
                                 <ra:nativeAttributeName>teletexTerminalIdentifier</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>teletexTerminalIdentifier</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="pager"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>250</a:displayOrder>
                                 <ra:nativeAttributeName>pager</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>pager</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="carLicense"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>260</a:displayOrder>
                                 <ra:nativeAttributeName>carLicense</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>carLicense</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="displayName" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>270</a:displayOrder>
                                 <ra:nativeAttributeName>displayName</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>displayName</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="labeledURI"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>280</a:displayOrder>
                                 <ra:nativeAttributeName>labeledURI</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>labeledURI</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="uid"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>290</a:displayOrder>
                                 <ra:nativeAttributeName>uid</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>uid</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element name="dn" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>110</a:displayOrder>
                                 <ra:nativeAttributeName>dn</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>__NAME__</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="homePostalAddress"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>300</a:displayOrder>
                                 <ra:nativeAttributeName>homePostalAddress</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>homePostalAddress</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="photo"
                                  type="xsd:base64Binary">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>310</a:displayOrder>
                                 <ra:nativeAttributeName>photo</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>photo</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="facsimileTelephoneNumber"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>320</a:displayOrder>
                                 <ra:nativeAttributeName>facsimileTelephoneNumber</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>facsimileTelephoneNumber</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="preferredDeliveryMethod" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>330</a:displayOrder>
                                 <ra:nativeAttributeName>preferredDeliveryMethod</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>preferredDeliveryMethod</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="homePhone"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>340</a:displayOrder>
                                 <ra:nativeAttributeName>homePhone</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>homePhone</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="x121Address"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>350</a:displayOrder>
                                 <ra:nativeAttributeName>x121Address</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>x121Address</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" minOccurs="0" name="l" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>360</a:displayOrder>
                                 <ra:nativeAttributeName>l</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>l</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" minOccurs="0" name="o" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>370</a:displayOrder>
                                 <ra:nativeAttributeName>o</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>o</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="businessCategory"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>380</a:displayOrder>
                                 <ra:nativeAttributeName>businessCategory</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>businessCategory</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="street"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>390</a:displayOrder>
                                 <ra:nativeAttributeName>street</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>street</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="postOfficeBox"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>400</a:displayOrder>
                                 <ra:nativeAttributeName>postOfficeBox</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>postOfficeBox</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="postalCode"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>410</a:displayOrder>
                                 <ra:nativeAttributeName>postalCode</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>postalCode</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" minOccurs="0" name="st" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>420</a:displayOrder>
                                 <ra:nativeAttributeName>st</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>st</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="manager"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>430</a:displayOrder>
                                 <ra:nativeAttributeName>manager</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>manager</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="departmentNumber"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>440</a:displayOrder>
                                 <ra:nativeAttributeName>departmentNumber</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>departmentNumber</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="internationaliSDNNumber"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>450</a:displayOrder>
                                 <ra:nativeAttributeName>internationaliSDNNumber</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>internationaliSDNNumber</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="employeeType"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>460</a:displayOrder>
                                 <ra:nativeAttributeName>employeeType</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>employeeType</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="initials"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>470</a:displayOrder>
                                 <ra:nativeAttributeName>initials</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>initials</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" name="sn" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>480</a:displayOrder>
                                 <ra:nativeAttributeName>sn</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>sn</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="ds-pwp-account-disabled" type="xsd:boolean">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:ignore>true</a:ignore>
                                 <a:displayOrder>490</a:displayOrder>
                                 <ra:nativeAttributeName>ds-pwp-account-disabled</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>ds-pwp-account-disabled</ra:frameworkAttributeName>
                                 <ra:returnedByDefault>false</ra:returnedByDefault>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" minOccurs="0" name="ou" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>500</a:displayOrder>
                                 <ra:nativeAttributeName>ou</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>ou</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="physicalDeliveryOfficeName"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>510</a:displayOrder>
                                 <ra:nativeAttributeName>physicalDeliveryOfficeName</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>physicalDeliveryOfficeName</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="telexNumber"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>520</a:displayOrder>
                                 <ra:nativeAttributeName>telexNumber</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>telexNumber</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="userSMIMECertificate"
                                  type="xsd:base64Binary">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>530</a:displayOrder>
                                 <ra:nativeAttributeName>userSMIMECertificate</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>userSMIMECertificate</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="mobile"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>540</a:displayOrder>
                                 <ra:nativeAttributeName>mobile</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>mobile</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="userPKCS12"
                                  type="xsd:base64Binary">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>550</a:displayOrder>
                                 <ra:nativeAttributeName>userPKCS12</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>userPKCS12</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="givenName"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>560</a:displayOrder>
                                 <ra:nativeAttributeName>givenName</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>givenName</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="x500UniqueIdentifier"
                                  type="xsd:base64Binary">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>570</a:displayOrder>
                                 <ra:nativeAttributeName>x500UniqueIdentifier</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>x500UniqueIdentifier</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" name="cn" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>580</a:displayOrder>
                                 <ra:nativeAttributeName>cn</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>cn</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="destinationIndicator"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>590</a:displayOrder>
                                 <ra:nativeAttributeName>destinationIndicator</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>destinationIndicator</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="telephoneNumber"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>600</a:displayOrder>
                                 <ra:nativeAttributeName>telephoneNumber</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>telephoneNumber</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="title"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>610</a:displayOrder>
                                 <ra:nativeAttributeName>title</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>title</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="entryUUID" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>100</a:displayOrder>
                                 <a:access>read</a:access>
                                 <ra:nativeAttributeName>entryUUID</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>__UID__</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                 </xsd:sequence>
             </xsd:complexType>

             <xsd:complexType name="groupOfUniqueNames">
                 <xsd:annotation>
                     <xsd:appinfo>
                         <ra:resourceObject/>
                         <ra:identifier>ri:entryUUID</ra:identifier>
                         <ra:secondaryIdentifier>ri:dn</ra:secondaryIdentifier>
                         <ra:displayNameAttribute>ri:dn</ra:displayNameAttribute>
                         <ra:namingAttribute>ri:dn</ra:namingAttribute>
                         <ra:nativeObjectClass>groupOfUniqueNames</ra:nativeObjectClass>
                     </xsd:appinfo>
                 </xsd:annotation>
                 <xsd:sequence>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="seeAlso"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>120</a:displayOrder>
                                 <ra:nativeAttributeName>seeAlso</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>seeAlso</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="description"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>130</a:displayOrder>
                                 <ra:nativeAttributeName>description</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>description</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="uniqueMember"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>140</a:displayOrder>
                                 <ra:nativeAttributeName>uniqueMember</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>uniqueMember</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="ds-pwp-account-disabled" type="xsd:boolean">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:ignore>true</a:ignore>
                                 <a:displayOrder>150</a:displayOrder>
                                 <ra:nativeAttributeName>ds-pwp-account-disabled</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>ds-pwp-account-disabled</ra:frameworkAttributeName>
                                 <ra:returnedByDefault>false</ra:returnedByDefault>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" minOccurs="0" name="o" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>160</a:displayOrder>
                                 <ra:nativeAttributeName>o</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>o</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" minOccurs="0" name="ou" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>170</a:displayOrder>
                                 <ra:nativeAttributeName>ou</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>ou</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="businessCategory"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>180</a:displayOrder>
                                 <ra:nativeAttributeName>businessCategory</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>businessCategory</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded"
                                  minOccurs="0"
                                  name="owner"
                                  type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>190</a:displayOrder>
                                 <ra:nativeAttributeName>owner</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>owner</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element name="dn" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>110</a:displayOrder>
                                 <ra:nativeAttributeName>dn</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>__NAME__</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element maxOccurs="unbounded" name="cn" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>200</a:displayOrder>
                                 <ra:nativeAttributeName>cn</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>cn</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                     <xsd:element minOccurs="0" name="entryUUID" type="xsd:string">
                         <xsd:annotation>
                             <xsd:appinfo>
                                 <a:displayOrder>100</a:displayOrder>
                                 <a:access>read</a:access>
                                 <ra:nativeAttributeName>entryUUID</ra:nativeAttributeName>
                                 <ra:frameworkAttributeName>__UID__</ra:frameworkAttributeName>
                             </xsd:appinfo>
                         </xsd:annotation>
                     </xsd:element>
                 </xsd:sequence>
             </xsd:complexType>

         </xsd:schema>
      </definition>
   </schema>
    
	<schemaHandling>
		<objectType>
			<intent>default</intent>
			<displayName>Default Account</displayName>
			<default>true</default>
			<objectClass>ri:inetOrgPerson</objectClass>
			<attribute>
				<ref>ri:dn</ref>
				<displayName>Distinguished Name</displayName>
				<outbound>
					<source>
						<path>$user/name</path>
					</source>
					<expression>
						<script>
							<code>'uid=' + name + ',ou=people,dc=example,dc=com'</code>
						</script>
					</expression>
				</outbound>
			</attribute>
			<attribute>
				<ref>ri:entryUUID</ref>
				<displayName>Entry UUID</displayName>
				<limitations>
                    <access>
                        <read>true</read>
                    </access>
                </limitations>
			</attribute>
			<attribute>
				<ref>ri:cn</ref>
				<displayName>Common Name</displayName>
				<limitations>
					<minOccurs>0</minOccurs>
					<access>
                        <read>true</read>
						<add>true</add>
						<modify>true</modify>
					</access>
				</limitations>
				<outbound>
					<source>
						<path>$user/fullName</path>
					</source>
				</outbound>
				<inbound>
					<strength>weak</strength>
					<target>
						<path>$user/fullName</path>
					</target>
				</inbound>
			</attribute>
			<attribute>
				<ref>ri:sn</ref>
				<displayName>Surname</displayName>
				<limitations>
					<minOccurs>0</minOccurs>
				</limitations>
				<outbound>
					<source>
						<path>familyName</path>
					</source>
				</outbound>
				<inbound>
					<strength>weak</strength>
					<target>
						<path>familyName</path>
					</target>
				</inbound>
			</attribute>
			<attribute>
				<ref>ri:givenName</ref>
				<displayName>Given Name</displayName>
				<outbound>
					<source>
						<path>$c:user/c:givenName</path>
					</source>
				</outbound>
				<inbound>
					<strength>weak</strength>
					<target>
						<path>$c:user/c:givenName</path>
					</target>
				</inbound>
			</attribute>
			<attribute>
				<ref>ri:uid</ref>
				<displayName>Login Name</displayName>
				<limitations>
                    <access>
                        <read>true</read>
                        <add>true</add>
                    </access>
                </limitations>
				<outbound>
					<strength>weak</strength>
					<source>
						<path>$user/name</path>
					</source>
				</outbound>
				<inbound>
					<strength>weak</strength>
					<target>
						<path>$c:user/c:name</path>
                    			</target>
				</inbound>
			</attribute>
			<attribute>
				<ref>ri:description</ref>
				<outbound>
					<strength>weak</strength>
					<expression>
						<description>Expression that assigns a fixed description value if there is no other description present.</description>
						<value>Managed by midPoint</value>
					</expression>
				</outbound>
			</attribute>
			<attribute>
				<ref>ri:l</ref>
				<inbound>
					<target>
						<path>$user/locality</path>
					</target>
				</inbound>
			</attribute>
			<attribute>
				<ref>ri:telephoneNumber</ref>
				<outbound>
					<source>
						<path>$user/telephoneNumber</path>
					</source>
				</outbound>
				<inbound>
					<target>
						<path>$user/telephoneNumber</path>
					</target>
				</inbound>
			</attribute>
			<attribute>
				<ref>ri:employeeNumber</ref>
				<outbound>
					<strength>strong</strength>
					<source>
						<path>$user/employeeNumber</path>
					</source>
				</outbound>
				<inbound>
					<strength>weak</strength>
					<target>
						<path>$user/employeeNumber</path>
					</target>
				</inbound>
			</attribute>
			<attribute>
				<ref>ri:employeeType</ref>
				<outbound>
					<strength>strong</strength>
					<source>
						<path>$user/employeeType</path>
					</source>
				</outbound>
				<inbound>
					<strength>weak</strength>
					<target>
						<path>$user/employeeType</path>
					</target>
				</inbound>
			</attribute>
			
			<association>
				<ref>ri:ldapGroups</ref>
				<displayName>Group Membership</displayName>
				<matchingRule>mr:stringIgnoreCase</matchingRule>
				<tolerant>true</tolerant>
				<kind>entitlement</kind>
				<intent>group</intent>
				<direction>objectToSubject</direction>
				<associationAttribute>ri:uniqueMember</associationAttribute>
				<valueAttribute>ri:dn</valueAttribute>
				<explicitReferentialIntegrity>false</explicitReferentialIntegrity>
			</association>

            <association>
                <c:ref>ri:ldapProjects</c:ref>
                <displayName>Project Membership</displayName>
                <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
                <tolerant>false</tolerant>
                <kind>entitlement</kind>
                <intent>ldapProject</intent>
                <direction>objectToSubject</direction>
                <associationAttribute>ri:uniqueMember</associationAttribute>
                <valueAttribute>ri:dn</valueAttribute>
                <explicitReferentialIntegrity>false</explicitReferentialIntegrity>
            </association>

			<protected>
                <filter>
                    <q:equal>
                        <q:matching>http://prism.evolveum.com/xml/ns/public/matching-rule-3#distinguishedName</q:matching>
                        <q:path>attributes/ri:dn</q:path>
                        <q:value>uid=idm,ou=Administrators,dc=example,dc=com</q:value>
                    </q:equal>
                </filter>
            </protected>

            <activation>
                  <administrativeStatus>
                    <outbound/>
                    <inbound>
                    	<strength>weak</strength>
                        <expression>
                            <asIs/>
                        </expression>
                    </inbound>
                  </administrativeStatus>
            </activation>
			
            <credentials>
                <password>
                    <outbound>
                    	<expression>
                        	<asIs/>
                        </expression>
                    </outbound>
                    <inbound>
                    	<strength>weak</strength>
                        <expression>
                            <generate/>
                        </expression>
                    </inbound>
                </password>
            </credentials>
		</objectType>
        <objectType>
				<kind>entitlement</kind>
				<intent>group</intent>
				<displayName>Group</displayName>
				<default>true</default>
				<objectClass>ri:groupOfUniqueNames</objectClass>
</objectType>
	</schemaHandling>
	
    <capabilities xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3">
    	<configured>
            <cap:activation>
                <cap:status>
                    <cap:attribute>ri:ds-pwp-account-disabled</cap:attribute>
                    <cap:enableValue/>
                    <cap:disableValue>true</cap:disableValue>
                </cap:status>
            </cap:activation>
    	</configured>
    </capabilities>

        <synchronization>
		<objectSynchronization>
		<name>sync</name>
                        
						<objectClass>ri:AccountObjectClass</objectClass>
                        <kind>account</kind>
                        <intent>default</intent>

	            <enabled>true</enabled>
	
	            <correlation>
	                <q:description>
	                    Correlation expression is a search query.
	                    Following search queury will look for users that have "name"
	                    equal to the "uid" attribute of the account. Simply speaking,
	                    it will look for match in usernames in the IDM and the resource.
	                    The correlation rule always looks for users, so it will not match
	                    any other object type.
	                </q:description>
	                <q:equal>
	                    <q:path>c:name</q:path>
	                    <expression>
							<path>
							declare namespace ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3";
							$account/attributes/ri:uid
							</path>
	                    </expression>
	                </q:equal>
	            </correlation>

                <reaction>
                    <situation>linked</situation>
                    <synchronize>true</synchronize>
                </reaction>
                <reaction>
                    <situation>deleted</situation>
                    <action>
                        <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
                    </action>
                </reaction>
                <reaction>
                    <situation>unlinked</situation>
                    <action>
                        <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
                    </action>
                </reaction>
                <reaction>
                    <situation>unmatched</situation>
                    <action>
                        <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addUser</handlerUri>
                    </action>
                </reaction>
			</objectSynchronization>
        </synchronization>

    </resource>

    <task oid="87843d58-76b8-11e2-ae3e-001e8c717e5b">
        <name>Live Sync: LDAP Server (OpenDJ)</name>
        <description>
            Definition of a live sychnronization task. It will poll changelog and pull in changes
        </description>
        <taskIdentifier>91919191-76e0-59e2-86d6-3d4f02d3ffff</taskIdentifier>
        <ownerRef oid="00000000-0000-0000-0000-000000000002"/>
        <executionStatus>runnable</executionStatus>
        <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/synchronization/task/live-sync/handler-3</handlerUri>
        <objectRef oid="12c78a70-76b7-11e2-9cb3-001e8c717e5b" type="ResourceType"/>
        <recurrence>recurring</recurrence>
        <binding>tight</binding>
        <schedule>
            <interval>5</interval>
        </schedule>
    </task>

</objects>
